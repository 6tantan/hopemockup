<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Hope Idle Rooms</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-neutral-950 text-white">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      // Utils
      const clamp=(v,a,b)=>Math.max(a,Math.min(b,v));
      const randInt=(m,M)=>Math.floor(Math.random()*(M-m+1))+m;
      const sleep=(ms)=>new Promise(r=>setTimeout(r,ms));

      // Data
      const ATTACKS={
        L:{key:'L',accBonus:+0.10,powMul:0.80,intMul:0.00},
        H:{key:'H',accBonus:-0.10,powMul:1.35,intMul:0.00},
        S:{key:'S',accBonus: 0.00,powMul:0.20,intMul:1.00},
      };
      const FLOW_KEYS=['L','H','S'];

      const DEFAULT_PLAYER={
        name:'Jumo',job:'Novice',level:1,exp:0,expToNext:100,
        maxHP:80,hp:80,maxMP:30,mp:30,POW:10,DEF:5,INT:8,DEX:10,EVA:5
      };
      const BASE_ENEMY={name:'Slime',maxHP:60,hp:60,maxMP:10,mp:10,POW:8,DEF:3,INT:3,DEX:7,EVA:3};
      const INVENTORY_START={
        items:[
          {id:'potion',name:'Potion',desc:'å›å¾© 20 HP',qty:5},
          {id:'ether', name:'Ether', desc:'å›å¾© 10 MP',qty:3},
          {id:'bomb',  name:'Bomb',  desc:'é€ æˆ 30 å‚·å®³',qty:1},
        ],
        equipment:[
          {slot:'Weapon',name:'Bronze Sword',bonus:'+2 POW'},
          {slot:'Armor', name:'Cloth Armor', bonus:'+1 DEF'},
        ],
      };
      const COMPANIONS_POOL=['Kirin','Mimo','Arisa','Drex','Chao','Neri'];

      // Hit & dmg
      const baseAcc=(a,d)=>clamp(0.60+0.02*(a.DEX-d.EVA),0.05,0.95);
      const hitChance=(a,d,t,i)=>clamp(baseAcc(a,d)+ATTACKS[t].accBonus+(i===0?0:(i===1?0.10:0.20)),0.05,0.98);
      function rollDamage(a,d,t){const s=ATTACKS[t];let dmg=Math.round(s.powMul*a.POW+s.intMul*a.INT+randInt(-1,2));return Math.max(1,dmg-Math.round(d.DEF*0.5));}

      // UI bits
      function HPBar({label,current,max,color}){const pct=Math.max(0,Math.round(current/max*100));return(
        <div className="w-full">
          <div className="flex justify-between text-xs text-gray-400 mb-1"><span>{label}</span><span>{current}/{max}</span></div>
          <div className="h-3 w-full bg-gray-800/60 rounded-full overflow-hidden"><div className={"h-full "+color+" transition-all duration-300"} style={{width:pct+"%"}}/></div>
        </div>
      );}
      const StatRow=({unit})=>(<div className="mt-3 text-sm text-white/80">POW {unit.POW} Â· DEF {unit.DEF} Â· INT {unit.INT} Â· DEX {unit.DEX} Â· EVA {unit.EVA}</div>);
      const Card=({children,className=""})=>(<div className={"rounded-2xl bg-gray-900/60 border border-white/10 shadow-xl p-5 "+className}>{children}</div>);
      const Divider=()=> <div className="h-px bg-white/10 my-4"/>;
      function useAutoscroll(dep){const ref=useRef(null);useEffect(()=>{if(ref.current)ref.current.scrollTop=ref.current.scrollHeight;},[dep]);return ref;}
      function FlowButton({value,onChange}){const cycle=()=>{const i=FLOW_KEYS.indexOf(value);onChange(FLOW_KEYS[(i+1)%FLOW_KEYS.length]);};const text=value==='L'?'L è¼•':value==='H'?'H é‡':'S ç‰¹';return <button onClick={cycle} className="px-3 py-2 rounded-xl bg-white/10 hover:bg-white/15 transition">{text}</button>;}
      const FullCenter=({children})=>(<div className="min-h-[70vh] flex items-center justify-center">{children}</div>);

      // Enemy scaling
      function makeEnemyForRoom(idx,diff,total){
        const diffMul=diff==='Normal'?0.9:diff==='Hard'?1.1:1.3;
        const roomGrowth=1+(idx-1)*0.08;
        const elite=(diff==='Hard'&&idx===total);
        const boss =(diff==='VeryHard'&&idx===total);
        const mul=diffMul*roomGrowth*(elite?1.25:1)*(boss?1.6:1);
        const name=boss?'Evil Tuma':elite?'Elite Slime':BASE_ENEMY.name;
        const hp=Math.round(BASE_ENEMY.maxHP*mul);
        const mp=Math.round(BASE_ENEMY.maxMP*Math.max(1,mul*0.6));
        return {...BASE_ENEMY,name,maxHP:hp,hp,maxMP:mp,mp,
          POW:Math.round(BASE_ENEMY.POW*mul),DEF:Math.round(BASE_ENEMY.DEF*mul),
          INT:Math.round(BASE_ENEMY.INT*mul),DEX:Math.round(BASE_ENEMY.DEX*mul),EVA:Math.round(BASE_ENEMY.EVA*mul)};
      }
      const randomFlow=()=>{const p=()=>FLOW_KEYS[randInt(0,FLOW_KEYS.length-1)];return[p(),p(),p()];};

      // App
      function App(){
        const [screen,setScreen]=useState('title'); // title|main|quest|prepare|battle|result|status|inventory|companions
        const [player,setPlayer]=useState({...DEFAULT_PLAYER});
        const [inventory]=useState(INVENTORY_START);
        const [party,setParty]=useState([]);

        const [difficulty,setDifficulty]=useState(null);
        const [totalRooms,setTotalRooms]=useState(0);
        const [roomIndex,setRoomIndex]=useState(0);
        const [enemy,setEnemy]=useState(makeEnemyForRoom(1,'Normal',3));

        const [logs,setLogs]=useState([]); const logRef=useAutoscroll(logs);
        const [busy,setBusy]=useState(false);
        const [result,setResult]=useState(null);

        const [playerFlow,setPlayerFlow]=useState(['L','H','S']);
        const [enemyFlow,setEnemyFlow]=useState(randomFlow());

        const goMain=()=>{ setPlayer(p=>({...p,hp:p.maxHP,mp:p.maxMP})); setScreen('main'); };
        const goQuest=()=>setScreen('quest');
        const goStatus=()=>setScreen('status');
        const goInventory=()=>setScreen('inventory');
        const goCompanions=()=>setScreen('companions');
        const startFromTitle=()=>setScreen('main');

        function chooseQuest(diff){
          const rooms=diff==='Normal'?3:diff==='Hard'?5:7;
          setDifficulty(diff); setTotalRooms(rooms); setRoomIndex(1);
          setEnemy(makeEnemyForRoom(1,diff,rooms)); setEnemyFlow(randomFlow());
          setLogs([]); setBusy(false); setScreen('prepare');
        }
        const enterNextRoom=()=>{ if(!difficulty) return; setScreen('battle'); };

        // Battle loop (auto)
        useEffect(()=>{
          if(screen!=='battle'||busy) return;
          let cancelled=false;
          (async()=>{
            setBusy(true);
            let pHP=player.hp, eHP=enemy.hp;
            while(!cancelled&&pHP>0&&eHP>0){
              // Player 3 strikes
              for(let i=0;i<3&&eHP>0;i++){
                const atk=playerFlow[i]; const acc=hitChance(player,{...enemy,hp:eHP},atk,i);
                await sleep(160);
                if(Math.random()<acc){ const d=rollDamage(player,enemy,atk); eHP=Math.max(0,eHP-d); setEnemy(v=>({...v,hp:eHP})); addLog(`Jumo [${atk}] å‘½ä¸­ï¼Œé€ æˆ ${d} å‚·å®³ï¼ˆå‘½ä¸­ç‡ ${Math.round(acc*100)}%ï¼‰`); }
                else addLog(`Jumo [${atk}] æœªå‘½ä¸­ï¼ˆå‘½ä¸­ç‡ ${Math.round(acc*100)}%ï¼‰`);
                await sleep(120);
              }
              if(eHP<=0) break;
              // Enemy 3 strikes
              for(let i=0;i<3&&pHP>0;i++){
                const atk=enemyFlow[i]; const acc=hitChance(enemy,{...player,hp:pHP},atk,i);
                await sleep(160);
                if(Math.random()<acc){ const d=rollDamage(enemy,player,atk); pHP=Math.max(0,pHP-d); setPlayer(v=>({...v,hp:pHP})); addLog(`${enemy.name} [${atk}] å‘½ä¸­ï¼Œå°ä½ é€ æˆ ${d} å‚·å®³ï¼ˆå‘½ä¸­ç‡ ${Math.round(acc*100)}%ï¼‰`); }
                else addLog(`${enemy.name} [${atk}] çš„æ”»æ“Šè½ç©º`);
                await sleep(120);
              }
            }
            if(!cancelled){
              if(eHP<=0){
                awardExp(diffExp(difficulty));
                recoverBetweenRooms();
                if(roomIndex<totalRooms){
                  const next=roomIndex+1; setRoomIndex(next);
                  setEnemy(makeEnemyForRoom(next,difficulty,totalRooms)); setEnemyFlow(randomFlow());
                  setScreen('prepare'); addLog(`OK æ¸…ç©ºæˆ¿é–“ ${roomIndex}ï¼Œæº–å‚™é€²å…¥æˆ¿é–“ ${next}`);
                } else {
                  setResult({title:'Victory',desc:`${difficulty} åœ°åŸå·²å®Œå…¨æ”»ç•¥ï¼`}); setScreen('result');
                }
              }else if(pHP<=0){
                setResult({title:'Defeat',desc:`ä½ å€’åœ¨æˆ¿é–“ ${roomIndex}ï¼ˆ${difficulty}ï¼‰ã€‚`}); setScreen('result');
              }
            }
            setBusy(false);
          })();
          return()=>{cancelled=true};
        },[screen]);

        function awardExp(amount){
          setPlayer(prev=>{
            let exp=prev.exp+amount, level=prev.level, expToNext=prev.expToNext;
            let maxHP=prev.maxHP, hp=prev.hp, maxMP=prev.maxMP, mp=prev.mp;
            while(exp>=expToNext){
              exp-=expToNext; level+=1; expToNext=100+level*20;
              maxHP+=6; hp=Math.min(maxHP,hp+6); maxMP+=3; mp=Math.min(maxMP,mp+3);
            }
            return {...prev,exp,level,expToNext,maxHP,hp,maxMP,mp};
          });
        }
        const diffExp=d=>d==='Normal'?10:d==='Hard'?18:28;
        function recoverBetweenRooms(){
          setPlayer(prev=>{
            const hpRec=Math.ceil(prev.maxHP*0.08);
            const mpRec=Math.ceil(prev.maxMP*0.08);
            return {...prev,hp:Math.min(prev.maxHP,prev.hp+hpRec),mp:Math.min(prev.maxMP,prev.mp+mpRec)};
          });
        }
        function addLog(s){ setLogs(v=>[...v,s].slice(-160)); }

        // Screens
        const Title=()=>(
          <FullCenter>
            <Card className="w-full max-w-xl text-center">
              <div className="text-3xl font-bold mb-2">Hope Idle Rooms</div>
              <div className="opacity-80 mb-6">æ”¾ç½®å‹ Â· L/H/S ä¸‰æ®µæ”»æ“Š Â· æˆ¿é–“é–“èª¿æ•´æµç¨‹</div>
              <button onClick={startFromTitle} className="px-6 py-3 rounded-xl bg-emerald-500/90 hover:bg-emerald-500 transition font-medium w-full">Start</button>
            </Card>
          </FullCenter>
        );
        const Main=()=>(
          <div className="grid gap-4 md:grid-cols-2">
            <Card><div className="text-lg font-semibold mb-3">ğŸ“œ ä»»å‹™é¸æ“‡</div><p className="text-sm text-white/70 mb-3">æŒ‘æˆ°ä¸åŒé›£åº¦çš„åœ°åŸã€‚</p><button onClick={goQuest} className="px-4 py-2 rounded-xl bg-indigo-500/90 hover:bg-indigo-500 transition font-medium">é€²å…¥ä»»å‹™é¸æ“‡</button></Card>
            <Card><div className="text-lg font-semibold mb-3">ğŸ§‘ è§’è‰²ç‹€æ…‹</div><p className="text-sm text-white/70 mb-3">æŸ¥çœ‹ç­‰ç´šã€è·æ¥­ã€å±¬æ€§èˆ‡å‡ç´šé€²åº¦ã€‚</p><button onClick={goStatus} className="px-4 py-2 rounded-xl bg-white/10 hover:bg-white/15 transition font-medium">æŸ¥çœ‹è§’è‰²ç‹€æ…‹</button></Card>
            <Card><div className="text-lg font-semibold mb-3">ğŸ’ èƒŒåŒ…</div><p className="text-sm text-white/70 mb-3">ç›®å‰æŒæœ‰çš„é“å…·èˆ‡è£å‚™ã€‚</p><button onClick={goInventory} className="px-4 py-2 rounded-xl bg-white/10 hover:bg-white/15 transition font-medium">æ‰“é–‹èƒŒåŒ…</button></Card>
            <Card><div className="text-lg font-semibold mb-3">ğŸ‘¥ åŒä¼´åˆ—è¡¨</div><p className="text-sm text-white/70 mb-3">èŠå¤©å®¤ç©å®¶è§’è‰²ï¼Œé»æ“ŠåŠ å…¥çµ„éšŠã€‚</p><button onClick={goCompanions} className="px-4 py-2 rounded-xl bg-white/10 hover:bg-white/15 transition font-medium">æŸ¥çœ‹åŒä¼´</button></Card>
          </div>
        );
        const Quest=()=>(
          <div className="grid gap-4 md:grid-cols-3">
            <Card><div className="text-lg font-semibold mb-2">Normal</div><p className="text-sm text-white/80">3 å€‹æˆ¿é–“ Â· æ€ªç‰©å¼±å°</p><Divider/><button onClick={()=>chooseQuest('Normal')} className="px-4 py-2 rounded-xl bg-emerald-500/90 hover:bg-emerald-500 transition font-medium w-full">é–‹å§‹</button></Card>
            <Card><div className="text-lg font-semibold mb-2">Hard</div><p className="text-sm text-white/80">5 å€‹æˆ¿é–“ Â· æ€ªç‰©ä¸­ç­‰ï¼Œæœ€å¾Œç‚ºç²¾è‹±</p><Divider/><button onClick={()=>chooseQuest('Hard')} className="px-4 py-2 rounded-xl bg-amber-500/90 hover:bg-amber-500 transition font-medium w-full">é–‹å§‹</button></Card>
            <Card><div className="text-lg font-semibold mb-2">VeryHard</div><p className="text-sm text-white/80">7 å€‹æˆ¿é–“ Â· æœ€çµ‚ Bossï¼šEvil Tuma</p><Divider/><button onClick={()=>chooseQuest('VeryHard')} className="px-4 py-2 rounded-xl bg-rose-500/90 hover:bg-rose-500 transition font-medium w-full">é–‹å§‹</button></Card>
          </div>
        );
        const Prepare=()=>(
          <div className="grid gap-4 md:grid-cols-3">
            <Card><div className="text-lg font-semibold mb-3">ğŸ§‘ Jumo</div><HPBar label="HP" current={player.hp} max={player.maxHP} color="bg-emerald-500"/><div className="mt-2"/><HPBar label="MP" current={player.mp} max={player.maxMP} color="bg-sky-500"/><StatRow unit={player}/></Card>
            <Card>
              <div className="text-lg font-semibold mb-1">ğŸ› ï¸ æº–å‚™éšæ®µ</div>
              <div className="text-sm text-white/70">é›£åº¦ <span className="font-semibold">{difficulty}</span> Â· æˆ¿é–“ {roomIndex}/{totalRooms}</div>
              <div className="text-xs text-white/60">å‘½ä¸­åŠ æˆï¼šç¬¬1ä¸‹ +0%ï¼Œç¬¬2ä¸‹ +10%ï¼Œç¬¬3ä¸‹ +20%</div>
              <Divider/>
              <div className="text-sm mb-2">ç©å®¶æ”»æ“Šæµç¨‹ï¼š</div>
              <div className="flex gap-2">{playerFlow.map((v,i)=><FlowButton key={i} value={v} onChange={(nv)=>setPlayerFlow(f=>f.map((x,idx)=>idx===i?nv:x))}/>)}</div>
              <div className="text-xs text-white/60 mt-2">æç¤ºï¼šæŠŠ H æ”¾åˆ°ç¬¬ä¸‰ä¸‹ï¼Œäº«å—è¼ƒé«˜å‘½ä¸­åŠ æˆã€‚</div>
              <Divider/>
              <button onClick={enterNextRoom} className="px-4 py-2 rounded-xl bg-indigo-500/90 hover:bg-indigo-500 transition font-medium">é€²å…¥ä¸‹ä¸€å€‹æˆ¿é–“</button>
              <div className="text-xs text-white/50 mt-2">(æŒ‰ä¸‹å¾Œå°‡é–‹å§‹è‡ªå‹•æˆ°é¬¥)</div>
              <Divider/>
              <div className="text-sm font-semibold mb-2">æˆ°é¬¥ç´€éŒ„ï¼ˆä¸Šä¸€æˆ¿ / é€²è¡Œä¸­ï¼‰</div>
              <div ref={logRef} className="h-40 overflow-auto rounded-xl bg-black/30 p-3 text-sm leading-relaxed">
                {logs.length===0?<div className="opacity-50">(å°šç„¡ç´€éŒ„)</div>:logs.map((l,i)=><div key={i} className="mb-1">- {l}</div>)}
              </div>
            </Card>
            <Card><div className="text-lg font-semibold mb-3">ğŸ‘¾ ä¸‹ä¸€å€‹æ•µäººï¼š{enemy.name}</div><HPBar label="HP" current={enemy.maxHP} max={enemy.maxHP} color="bg-rose-500"/><div className="mt-2"/><HPBar label="MP" current={enemy.maxMP} max={enemy.maxMP} color="bg-sky-500"/><StatRow unit={enemy}/><Divider/><div className="text-sm">æ•µæ–¹æµç¨‹(éš¨æ©Ÿ)ï¼š<span className="ml-2 font-mono bg-white/10 rounded px-2 py-0.5">{enemyFlow.join(' - ')}</span></div></Card>
          </div>
        );
        const Battle=()=>(
          <div className="grid gap-4 md:grid-cols-3">
            <Card><div className="text-lg font-semibold mb-3">ğŸ§‘ Jumo</div><HPBar label="HP" current={player.hp} max={player.maxHP} color="bg-emerald-500"/><div className="mt-2"/><HPBar label="MP" current={player.mp} max={player.maxMP} color="bg-sky-500"/><StatRow unit={player}/></Card>
            <Card>
              <div className="text-lg font-semibold mb-1">âš”ï¸ æˆ°é¬¥ä¸­</div>
              <div className="text-sm text-white/70">{difficulty} Â· æˆ¿é–“ {roomIndex}/{totalRooms} Â· ç©å®¶æµç¨‹ï¼š<span className="ml-2 font-mono bg-white/10 rounded px-2 py-0.5">{playerFlow.join(' - ')}</span></div>
              <div className="text-sm text-white/70">æ•µäººæµç¨‹ï¼š<span className="ml-2 font-mono bg-white/10 rounded px-2 py-0.5">{enemyFlow.join(' - ')}</span></div>
              <Divider/>
              <div ref={logRef} className="h-56 overflow-auto rounded-xl bg-black/30 p-3 text-sm leading-relaxed">
                {logs.length===0?<div className="opacity-50">è‡ªå‹•æˆ°é¬¥ä¸­...</div>:logs.map((l,i)=><div key={i} className="mb-1">- {l}</div>)}
              </div>
              <Divider/>
              <div className="flex justify-between">
                <button onClick={goMain} className="px-3 py-2 rounded-xl bg-white/10 hover:bg-white/15 transition">å›ä¸»ç•«é¢</button>
                <div className="text-xs text-white/60 self-center">æ¯å›åˆé€£æ‰“ 3 æ¬¡ï¼ˆå‘½ä¸­é€æ¬¡ä¸Šå‡ï¼‰</div>
              </div>
            </Card>
            <Card><div className="text-lg font-semibold mb-3">ğŸ‘¾ {enemy.name}</div><HPBar label="HP" current={enemy.hp} max={enemy.maxHP} color="bg-rose-500"/><div className="mt-2"/><HPBar label="MP" current={enemy.mp} max={enemy.maxMP} color="bg-sky-500"/><StatRow unit={enemy}/></Card>
          </div>
        );
        const Status=()=>{const pct=Math.round((player.exp/player.expToNext)*100);return(
          <Card className="max-w-3xl">
            <div className="text-lg font-semibold mb-2">ğŸ§‘ è§’è‰²ç‹€æ…‹</div>
            <div className="text-sm">åç¨±ï¼šJumo ï½œ è·æ¥­ï¼š{player.job} ï½œ ç­‰ç´šï¼š{player.level}</div>
            <div className="mt-3"/><HPBar label="HP" current={player.hp} max={player.maxHP} color="bg-emerald-500"/><div className="mt-2"/><HPBar label="MP" current={player.mp} max={player.maxMP} color="bg-sky-500"/><StatRow unit={player}/>
            <Divider/><div className="text-sm">å‡ç´šé€²åº¦ï¼š{player.exp}/{player.expToNext} EXPï¼ˆå‰©é¤˜ {Math.max(0,player.expToNext-player.exp)}ï¼‰</div>
            <div className="h-2 bg-white/10 rounded mt-2 overflow-hidden"><div className="h-full bg-amber-400" style={{width:pct+"%"}}/></div>
            <Divider/><button onClick={goMain} className="px-4 py-2 rounded-xl bg-white/10 hover:bg-white/15 transition font-medium">è¿”å›ä¸»ç•«é¢</button>
          </Card>
        );};
        const Inventory=()=>(
          <Card className="max-w-4xl">
            <div className="text-lg font-semibold mb-2">ğŸ’ èƒŒåŒ…</div>
            <div className="grid md:grid-cols-2 gap-4">
              <div>
                <div className="font-semibold mb-2">é“å…·</div>
                {inventory.items.length===0?<div className="text-white/60 text-sm">(ç©º)</div>:
                  <ul className="space-y-2">{inventory.items.map(it=><li key={it.id} className="flex justify-between bg-white/5 rounded-lg px-3 py-2 text-sm"><span>{it.name} <span className="text-white/50">â€” {it.desc}</span></span><span className="font-mono">Ã—{it.qty}</span></li>)}</ul>}
              </div>
              <div>
                <div className="font-semibold mb-2">è£å‚™</div>
                {inventory.equipment.length===0?<div className="text-white/60 text-sm">(ç©º)</div>:
                  <ul className="space-y-2">{inventory.equipment.map((eq,i)=><li key={i} className="flex justify-between bg-white/5 rounded-lg px-3 py-2 text-sm"><span>{eq.slot}: {eq.name}</span><span className="text-white/60">{eq.bonus}</span></li>)}</ul>}
              </div>
            </div>
            <Divider/><button onClick={goMain} className="px-4 py-2 rounded-xl bg-white/10 hover:bg-white/15 transition font-medium">è¿”å›ä¸»ç•«é¢</button>
          </Card>
        );
        const Companions=()=>{const toggle=n=>setParty(p=>p.includes(n)?p.filter(x=>x!==n):[...p,n]);return(
          <Card className="max-w-3xl">
            <div className="text-lg font-semibold mb-2">ğŸ‘¥ åŒä¼´åˆ—è¡¨</div>
            <div className="text-sm text-white/70 mb-2">é»æ“Šåç¨±åŠ å…¥/ç§»é™¤éšŠä¼ï¼ˆç›®å‰åƒ…å±•ç¤ºï¼‰ã€‚</div>
            <div className="flex flex-wrap gap-2 mb-4">{COMPANIONS_POOL.map(n=><button key={n} onClick={()=>toggle(n)} className={"px-3 py-1.5 rounded-full border "+(party.includes(n)?"border-emerald-400 bg-emerald-400/10":"border-white/15 bg-white/5")+" hover:bg-white/10 transition"}>{n}</button>)}</div>
            <div className="text-sm">ç›®å‰éšŠä¼ï¼š{party.length===0?<span className="text-white/60">(ç„¡)</span>:party.map(n=><span key={n} className="inline-block font-mono bg-white/10 rounded px-2 py-0.5 mr-1">{n}</span>)}</div>
            <Divider/><button onClick={goMain} className="px-4 py-2 rounded-xl bg-white/10 hover:bg-white/15 transition font-medium">è¿”å›ä¸»ç•«é¢</button>
          </Card>
        );};
        const Result=()=>(
          <FullCenter>
            <Card className="w-full max-w-xl text-center">
              <div className="text-3xl font-bold mb-2">{result?.title}</div>
              <div className="opacity-80 mb-6">{result?.desc}</div>
              <div className="flex gap-2"><button onClick={goMain} className="px-6 py-3 rounded-xl bg-emerald-500/90 hover:bg-emerald-500 transition font-medium w-full">å›ä¸»ç•«é¢</button></div>
            </Card>
          </FullCenter>
        );

        return (
          <div className="p-6 max-w-6xl mx-auto text-white">
            <div className="mb-6 flex items-center justify-between">
              <h1 className="text-2xl font-bold tracking-tight">Hope Idle Rooms</h1>
              <div className="text-sm text-white/50">ä¸»ç•«é¢/ä»»å‹™/ç‹€æ…‹/èƒŒåŒ…/åŒä¼´ Â· æˆ¿é–“é–“å›å¾© 8% Â· å›ä¸»ç•«é¢å›æ»¿ Â· Logs ä¿ç•™</div>
            </div>
            {screen==='title'&&<Title/>}
            {screen==='main'&&<Main/>}
            {screen==='quest'&&<Quest/>}
            {screen==='prepare'&&<Prepare/>}
            {screen==='battle'&&<Battle/>}
            {screen==='status'&&<Status/>}
            {screen==='inventory'&&<Inventory/>}
            {screen==='companions'&&<Companions/>}
            {screen==='result'&&<Result/>}
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById('root')).render(<React.StrictMode><App/></React.StrictMode>);
    </script>
  </body>
</html>
